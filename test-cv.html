<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test CV PDF</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
            background: #f5f5f5;
        }

        h1 {
            margin-bottom: 2rem;
            color: #333;
        }

        .test-container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .pdf-container {
            width: 100%;
            height: 800px;
            border: 2px solid #C1272D;
            border-radius: 8px;
            overflow: auto;
            background: #fafafa;
        }

        iframe, object, embed {
            width: 100%;
            height: 100%;
            border: none;
        }

        .info {
            background: #e3f2fd;
            padding: 1rem;
            border-left: 4px solid #2196f3;
            margin-bottom: 1rem;
        }

        .success {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }

        .error {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .warning {
            background: #fff3e0;
            border-left-color: #ff9800;
        }

        .link-test {
            display: inline-block;
            margin: 1rem 0;
            padding: 0.75rem 1.5rem;
            background: #C1272D;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
        }

        .link-test:hover {
            background: #a01f24;
        }

        button {
            padding: 0.5rem 1rem;
            background: #006233;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 0.5rem;
        }

        button:hover {
            background: #004d28;
        }
    </style>
</head>
<body>
    <h1>üîç Test de Chargement du CV PDF</h1>

    <!-- Informations -->
    <div class="test-container">
        <h2>üìã Informations</h2>
        <div class="info">
            <strong>Fichier test√© :</strong> Soufiane_Aniba_CV_2025.pdf
        </div>
        <div class="info success" id="fileStatus">
            <strong>Status :</strong> En attente de v√©rification...
        </div>
        <a href="Soufiane_Aniba_CV_2025.pdf" target="_blank" class="link-test">
            üìÑ Ouvrir le PDF dans un nouvel onglet
        </a>
        <br>
        <a href="Soufiane_Aniba_CV_2025.pdf" download class="link-test">
            üíæ T√©l√©charger le PDF
        </a>
    </div>

    <!-- Test 1: Iframe -->
    <div class="test-container">
        <h2>Test 1 : M√©thode &lt;iframe&gt;</h2>
        <div class="info">
            <strong>M√©thode :</strong> Utilis√©e actuellement dans le portfolio
        </div>
        <button onclick="reloadIframe()">üîÑ Recharger Iframe</button>
        <div class="pdf-container" style="margin-top: 1rem;">
            <iframe id="testIframe" src="Soufiane_Aniba_CV_2025.pdf" title="Test CV Iframe"></iframe>
        </div>
        <div id="iframeStatus" class="info" style="margin-top: 1rem;">
            <strong>Status :</strong> Chargement en cours...
        </div>
    </div>

    <!-- Test 2: Object -->
    <div class="test-container">
        <h2>Test 2 : M√©thode &lt;object&gt;</h2>
        <div class="info">
            <strong>M√©thode :</strong> Alternative recommand√©e
        </div>
        <div class="pdf-container">
            <object id="testObject" data="Soufiane_Aniba_CV_2025.pdf" type="application/pdf">
                <p style="padding: 2rem; text-align: center;">
                    ‚ö†Ô∏è Votre navigateur ne peut pas afficher le PDF.<br>
                    <a href="Soufiane_Aniba_CV_2025.pdf" style="color: #C1272D; font-weight: bold;">
                        Cliquez ici pour t√©l√©charger le PDF
                    </a>
                </p>
            </object>
        </div>
    </div>

    <!-- Test 3: Embed -->
    <div class="test-container">
        <h2>Test 3 : M√©thode &lt;embed&gt;</h2>
        <div class="info warning">
            <strong>M√©thode :</strong> Ancienne m√©thode, moins compatible
        </div>
        <div class="pdf-container">
            <embed id="testEmbed" src="Soufiane_Aniba_CV_2025.pdf" type="application/pdf" />
        </div>
    </div>

    <!-- Diagnostic -->
    <div class="test-container">
        <h2>üîß Diagnostic Automatique</h2>
        <button onclick="runDiagnostic()">‚ñ∂Ô∏è Lancer le Diagnostic</button>
        <div id="diagnosticResults" style="margin-top: 1rem;"></div>
    </div>

    <script>
        // D√©tection du chargement de l'iframe
        const iframe = document.getElementById('testIframe');
        const iframeStatus = document.getElementById('iframeStatus');
        
        iframe.onload = function() {
            iframeStatus.className = 'info success';
            iframeStatus.innerHTML = '<strong>‚úÖ Status :</strong> PDF charg√© avec succ√®s dans l\'iframe !';
        };

        iframe.onerror = function() {
            iframeStatus.className = 'info error';
            iframeStatus.innerHTML = '<strong>‚ùå Status :</strong> Erreur lors du chargement du PDF dans l\'iframe.';
        };

        // Fonction pour recharger l'iframe
        function reloadIframe() {
            iframe.src = iframe.src;
            iframeStatus.className = 'info';
            iframeStatus.innerHTML = '<strong>Status :</strong> Rechargement en cours...';
        }

        // V√©rifier si le fichier existe
        fetch('Soufiane_Aniba_CV_2025.pdf', {method: 'HEAD'})
            .then(response => {
                const fileStatus = document.getElementById('fileStatus');
                if (response.ok) {
                    fileStatus.className = 'info success';
                    fileStatus.innerHTML = '<strong>‚úÖ Status :</strong> Le fichier PDF existe et est accessible (Code ' + response.status + ')';
                } else {
                    fileStatus.className = 'info error';
                    fileStatus.innerHTML = '<strong>‚ùå Status :</strong> Le fichier PDF n\'est pas accessible (Code ' + response.status + ')';
                }
            })
            .catch(error => {
                const fileStatus = document.getElementById('fileStatus');
                fileStatus.className = 'info error';
                fileStatus.innerHTML = '<strong>‚ùå Status :</strong> Erreur lors de la v√©rification du fichier : ' + error.message;
            });

        // Diagnostic automatique
        function runDiagnostic() {
            const results = document.getElementById('diagnosticResults');
            let html = '<h3>R√©sultats du Diagnostic :</h3>';

            // 1. V√©rifier le navigateur
            html += '<div class="info">';
            html += '<strong>Navigateur :</strong> ' + navigator.userAgent + '<br>';
            html += '<strong>Support PDF :</strong> ';
            
            // V√©rifier si le navigateur supporte les PDF
            if (navigator.pdfViewerEnabled !== undefined) {
                html += navigator.pdfViewerEnabled ? '‚úÖ Activ√©' : '‚ùå D√©sactiv√©';
            } else {
                html += '‚ùì Inconnu (propri√©t√© non support√©e)';
            }
            html += '</div>';

            // 2. V√©rifier les dimensions
            const container = document.querySelector('.pdf-container');
            html += '<div class="info">';
            html += '<strong>Dimensions du conteneur :</strong><br>';
            html += 'Largeur : ' + container.offsetWidth + 'px<br>';
            html += 'Hauteur : ' + container.offsetHeight + 'px';
            html += '</div>';

            // 3. V√©rifier l'iframe
            html += '<div class="info">';
            html += '<strong>Iframe :</strong><br>';
            html += 'Largeur : ' + iframe.offsetWidth + 'px<br>';
            html += 'Hauteur : ' + iframe.offsetHeight + 'px<br>';
            html += 'Source : ' + iframe.src;
            html += '</div>';

            // 4. Recommandations
            html += '<div class="info warning">';
            html += '<strong>üí° Recommandations :</strong><br>';
            html += '1. Si aucune m√©thode ne fonctionne, votre navigateur bloque peut-√™tre les PDF<br>';
            html += '2. Essayez d\'ouvrir le PDF directement (bouton ci-dessus)<br>';
            html += '3. V√©rifiez les extensions de navigateur qui bloquent le contenu<br>';
            html += '4. Sur mobile, utilisez plut√¥t un lien de t√©l√©chargement';
            html += '</div>';

            results.innerHTML = html;
        }

        // Lancer le diagnostic au chargement de la page
        window.addEventListener('load', function() {
            setTimeout(runDiagnostic, 1000);
        });
    </script>
</body>
</html>
